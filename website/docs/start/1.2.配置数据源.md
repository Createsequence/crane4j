## 1.2.1.配置一个数据源

在开始填充对象之前，你需要提前准备好一些数据源，并将其注册到全局配置对象中。

在 cranej4 中，一个数据源对应一个**数据源容器（Container）**，即意为“盛放数据的容器”，它们通过独一无二的命名空间 （namespace）进行区分。

我们可以将任何东西声明为容器，比如常见的 `Map`：

~~~java
Map<Integer, String> map = new HashMap<>();
map.put(1, "one");
map.put(2, "two");
map.put(3, "three");
Container<Integer> container = Containers.forMap("number", map);
~~~

在上述代码中，我们基于一个 `Map` 创建了一个数据源容器，它的 namespace 是 `number`，我们可以向它输入对应的 key 值，以便获得相应的 value：

~~~java
Map<Integer, ?> map = container.get(Arrays.asList(1, 2));
// [{1="one"}, {2="two"}]
~~~

:::tip

+ 关于如何基于各种数据源创建容器，请参见后文“数据源容器”；
+ 关于如何进行属性映射，请参见后文“操作配置”；

:::

## 1.2.2.获取全局配置对象

在配置了一个数据源——也就是数据源容器——后，我们需要将其注册到全局配置对象 `Crane4jGlobalConfiguration` 中。

在 Spring 或者 SpringBoot 环境中，你可以直接通过依赖注入获得它，比如：

~~~java
@Component
public class Bean {
    @Autowired // 直接通过依赖注入获得
    private Crane4jGlobalConfiguration configuration;
}
~~~

或者间接的通过  Spring 容器获得它，比如：

~~~java
@Component
public class Bean {
    @Autowired // 获得 Spring 容器
    private ApplicationContext context;
    
    public void run() {
        // 通过 Spring 容器获得
        Crane4jGlobalConfiguration configuration = context.getBean(Crane4jGlobalConfiguration.class);
    }
}
~~~

如果你不在 Spring 环境中，那么你应该在一开始的时候就直接通过工厂方法创建了一个配置对象：

~~~java
// 创建一个默认配置类
Crane4jGlobalConfiguration configuration = SimpleCrane4jGlobalConfiguration.create();
~~~

## 1.2.3.注册数据源

获取全局配置对象后，我们可以将数据源容器注册到全局配置中：

~~~java
Crane4jGlobalConfiguration configuration; // 全局配置对象
Container<Integer> container; // 上文创建的数据源容器
configuration.registerContainer(container);
~~~

在后续的操作和配置中，我们可以通过容器的 namespace 去从全局配置中获取该容器：

~~~java
configuration.getContainer("number");
~~~

:::tip

在 Spring 环境中，你可以通过更简单的方式完成多种数据源的注册，具体请参见后文“数据源容器”一章中 “方法”、“枚举”、“常量” 部分。

:::