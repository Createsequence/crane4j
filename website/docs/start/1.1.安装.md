:::tip

下文`${last-version}` 即为当前项目最新版本 ![maven-central](https://img.shields.io/github/v/release/Createsequence/crane4j?include_prereleases)

:::

## 1.1.1.在 SpringBoot 环境中使用

**引入依赖**

在 `SpringBoot` 项目中，请引入 `crane4j-spring-boot-starter` 依赖：

~~~xml
<dependency>
    <groupId>cn.crane4j</groupId>
    <artifactId>crane4j-spring-boot-starter</artifactId>
    <version>${last-version}</version>
</dependency>
~~~

**在启动类添加注解**

在启动类添加 `@EnableCrane4j` 或者 `@EnableCrane4jFramework` 注解启用自动配置：

~~~java
@EnableCrane4j // 启用 crane4j
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
~~~

项目启动后，`crane4j` 相关组件将会注册到 spring 上下文中。

## 1.1.2.在 Spring 环境中使用

**引入依赖**

在 Spring 项目中，请引入 `crane4j-spring-extension` 依赖：

~~~xml
<dependency>
    <groupId>cn.crane4j</groupId>
    <artifactId>crane4j-extension-spring</artifactId>
    <version>${last-version}</version>
</dependency>
~~~

并请确保已经引入 `spring-context`、`aspectjweaver` 依赖。

**启用配置**

`crane4j` 已经准备好了默认的配置类 `DefaultCrane4jSpringConfiguration`，用户仅需在自己的项目通过下述任意方式将其纳入 Spring 容器管理即可。

比如，你可以将 `DefaultCrane4jSpringConfiguration` 作为一个普通的 Bean 交给 Spring 管理：

~~~java
@Configuration
public class ProjectConfiguration {
    
    // 在 spring 容器中声明一个默认配置类
    @Bean
    public DefaultCrane4jSpringConfiguration defaultCrane4jSpringConfiguration() {
        return new DefaultCrane4jSpringConfiguration();
    }
}
~~~

或者，你也可以在任意注解或配置类中通过 `@Import` 将配置引入：

~~~java
@Import(DefaultCrane4jSpringConfiguration.class)
@Configuration
public class ProjectConfiguration {
}
~~~

两种方式效果一样，项目启动后，`crane4j` 相关组件将会注册到 spring 上下文中。

## 1.1.3.在非 Spring 环境中使用

**引入依赖**

在非 spring 环境中，引入 `crane4j-core` 模块即可：

~~~xml
<dependency>
    <groupId>cn.crane4j</groupId>
    <artifactId>crane4j-core</artifactId>
    <version>${last-version}</version>
</dependency>
~~~

**创建全局配置对象**

在非 Spring 环境中，crane4j 需要依赖用户手动创建的全局配置对象运行。你可以通过工厂方法创建一个默认配置对象：

~~~java
// 创建一个默认配置类
Crane4jGlobalConfiguration configuration = SimpleCrane4jGlobalConfiguration.create();
~~~

该 `Crane4jGlobalConfiguration` 对象中已经默认配置好了一些必要的组件，并且它们与配置对象一样，都是全局唯一的，后续不必再创建其他的实例。