## 可配置的容器提供者

可配置容器提供者 `ConfigurableContainerProvider` 是 `ContainerProvider` 接口的子类，而 `SimpleConfigurableContainerProvider` 是其中最常用的实现，相较普通的 `ContainerProvider` ，它提供对数据源容器的线程安全的注册、修改功能，并且实现了 `ContainerRegisterAware` 的标准回调。

 我们可以简单的创建一个 `ConfigurableContainerProvider` 并且使用：

~~~java
ConfigurableContainerProvider provider = new SimpleConfigurableContainerProvider();

// 注册
Container<?> container1 = LambdaContainer.forLambda("test", ids -> Collections.emptyMap());
provider.registerContainer(container);

// 修改，类似 Map 的 compute 方法
Container<?> container2 = LambdaContainer.forLambda("test", ids -> Collections.emptyMap());
rovider.replaceContainer("test", container ->
LambdaContainer.forLambda("test", ids -> Collections.emptyMap())
);

// 获取
provider.containsContainer("test"); // = true
Container<?> container3 = provider.getContainer("test");

// 注册回调
ContainerRegisterAware aware = new ContainerRegisterAware() { };
provider.addContainerRegisterAware(aware);
~~~

:::tip

`ContainerRegisterAware` 是用于感知并干涉容器注册行为的回调接口，具体请参见高级特性中的“容器注册回调”一节。

:::