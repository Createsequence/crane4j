在前文，我们知道 cranej4 可以在类或者类的属性上添加注解配置填充，不过实际中也存在一些无法直接修改类文件的场景，比如：

+ 待填充的对象是个 Map，根本没有对应的实体类；
+ 实体类是由外部库提供的，内部没有办法修改类文件；
+ 实体类需要跟着 API 一起打包提供给别人，在上面引入 cranej4 的注解包并不合适；

这种情况下，crane4j 支持通过类似 MapStruct 的方式，将注解配置的接口的抽象方法中，然后再生成接口代理对象，用户直接通过调用代理对象方法即可完成填充。

首先，**在接口上添加 `@Operator` 注解，将其声明为操作者接口**，然后再在抽象方法上使用 `@Assemble` 注解配置装配操作：

```java
@Operator
private interface OperatorInterface {
    
    // 所有传入的 map 对象，都会根据 id 对应的值进行填充
    @Assemble(key = "id", container = "foo", props = @Mapping(ref = "name"))
    void operate(Collection<Object> targets);
}
```

接着，若你在 Spring 环境中，则直接在启动类添加注解扫描路径即可：

~~~java
@OperatorScan(
    includePackages = {"cn.crane4j.example.operators", "cn.crane4j.spring.example.operators"},
    includeClasses = FooOperator.class, excludes = ExcludeOpeator.class
)
@Configuration
protected class Application {
}
~~~

在项目启动后，就像使用 Mybatis 的 `Mapper` 那样，直接从 Spring 中获取即可：

~~~Java
public class Example {
    @Autowried
    private OperatorInterface operator;
    
    public void run() {
        List<new Foo> foos = Arrays.asList(new Foo(1), new Foo(2));
        operator.operate(foos);
        // [Foo(1, "name2"), Foo(2, "name2")]
    }
}
~~~

