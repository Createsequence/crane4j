## 自定义容器

用户可以实现 `Container` 接口，然后在配置类中直接通过 `@Bean` 注解的方法、或者在实现类上添加 `@Component` 注解将该容器直接声明为 `bean`，随后即可用直接通过该容器的 `namespace` 引用。

比如：

~~~java
@Component
@RequiredArgsConstructor
public class UserContainer implements Container<Integer> {
    
    private final UserService userService;
    
    public String getNamespace() {
        return "user";
    }
    
    public Map<Integer, UserDO> get(Collection<Integer> ids) {
        List<UserDO> users = userService.listByIds(ids);
        return users.stream().collect(Collectors.toMap(UserDO::getId, Function.identify()));
    }
} 
~~~

上述示例我们实现了 `Container` 接口，创建了一个根据 id 返回 `UserDO` 集合的数据源容器，我们在上面添加 `@Component` 注解后交由 Spring 容器管理，则后续就可以直接在配置中通过命名空间 `"user"` 引用了。 

在非 spring 环境则与常量数据源容器或者 lambda 表达式数据源容器一样，获取 `Crane4jGlobalConfiguration` 后进行手动注册。